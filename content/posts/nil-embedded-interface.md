+++
title = 'Go Puzzle: Calling an embedded method on a nil interface'
date = 2024-05-10
categories = ['blog']
tags = ['go', 'programming']
draft = true
+++

Here's a fun one I came across today.  See if you can figure out what will happen when you run this code.

```go
import fmt

type Fooer interface {
	Foo()
}

// Inner is a Fooer
type Inner struct{}

func (*Inner) Foo() {
	fmt.Println("I Fooed")
}

// Outer embeds Inner...so Outer is a Fooer too
type Outer struct {
	Inner
}

func main() {
	var innerIntf any = (*Inner)(nil)
	innerIntf.(Fooer).Foo()

    var outer Outer
    outer.(Fooer).Foo()

	var outerIntf any = (*Outer)(nil)
	outerIntf.(Fooer).Foo()
}
```

If you guessed it would work just fine...you're wrong, as was I.  Here's the output:

```
Hi
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x480537]

goroutine 1 [running]:
main.(*Outer).Foo(0x528960?)
	<autogenerated>:1 +0x17
main.main()
	/tmp/sandbox1674451791/prog.go:28 +0xba

Program exited.
```

## Huh?
